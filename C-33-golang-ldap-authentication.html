<!DOCTYPE HTML><html lang=""><head><meta charset="UTF-8"><meta content="text/html; charset=utf-8"http-equiv="Content-Type"><title>C.33. Golang LDAP Authentication - Dasar Pemrograman Golang</title><meta content="IE=edge"http-equiv="X-UA-Compatible"/><meta content=""name="description"><meta content="GitBook 3.2.3"name="generator"><link href="gitbook/style.css"rel="stylesheet"><link href="gitbook/gitbook-plugin-disqus/plugin.css"rel="stylesheet"><link href="gitbook/gitbook-plugin-highlight/website.css"rel="stylesheet"><link href="gitbook/gitbook-plugin-search/search.css"rel="stylesheet"><link href="gitbook/gitbook-plugin-fontsettings/website.css"rel="stylesheet"><link href="styles/website.css"rel="stylesheet"><meta content="UZnxS2Dk3fm2_Elms3a__56Q_oQ3sQ1h0SVXXlHSmbE"name="google-site-verification"><meta content="https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg"name="og:image"><meta content="https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg"name="twitter:image"><meta content="true"name="HandheldFriendly"/><meta content="width=device-width,initial-scale=1,user-scalable=no"name="viewport"><meta content="yes"name="apple-mobile-web-app-capable"><meta content="black"name="apple-mobile-web-app-status-bar-style"><link href="gitbook/images/apple-touch-icon-precomposed-152.png"rel="apple-touch-icon-precomposed"sizes="152x152"><link href="gitbook/images/favicon.ico"rel="shortcut icon"type="image/x-icon"><link href="C-32-golang-jwt.html"rel="prev"/></head><body><div class="book"><div class="book-summary"><div role="search"id="book-search-input"><input placeholder="Type to search"type="text"/></div><nav role="navigation"><ul class="summary"><li class="chapter"data-level="1.1"data-path="./"><a href="./">Introduction</a></li><li class="chapter"data-level="1.2"><span>A. Pemrograman Go Dasar</span><ul class="articles"><li class="chapter"data-level="1.2.1"data-path="1-berkenalan-dengan-golang.html"><a href="1-berkenalan-dengan-golang.html">A.1. Berkenalan Dengan Golang</a></li><li class="chapter"data-level="1.2.2"data-path="2-instalasi-golang.html"><a href="2-instalasi-golang.html">A.2. Instalasi Golang</a></li><li class="chapter"data-level="1.2.3"data-path="3-gopath-dan-workspace.html"><a href="3-gopath-dan-workspace.html">A.3. GOPATH Dan Workspace</a></li><li class="chapter"data-level="1.2.4"data-path="4-instalasi-editor.html"><a href="4-instalasi-editor.html">A.4. Instalasi Editor</a></li><li class="chapter"data-level="1.2.5"data-path="5-go-command.html"><a href="5-go-command.html">A.5. Command</a></li><li class="chapter"data-level="1.2.6"data-path="6-hello-world.html"><a href="6-hello-world.html">A.6. Program Pertama: Hello World</a></li><li class="chapter"data-level="1.2.7"data-path="7-komentar.html"><a href="7-komentar.html">A.7. Komentar</a></li><li class="chapter"data-level="1.2.8"data-path="8-variabel.html"><a href="8-variabel.html">A.8. Variabel</a></li><li class="chapter"data-level="1.2.9"data-path="9-tipe-data.html"><a href="9-tipe-data.html">A.9. Tipe Data</a></li><li class="chapter"data-level="1.2.10"data-path="10-konstanta.html"><a href="10-konstanta.html">A.10. Konstanta</a></li><li class="chapter"data-level="1.2.11"data-path="11-operator.html"><a href="11-operator.html">A.11. Operator</a></li><li class="chapter"data-level="1.2.12"data-path="12-seleksi-kondisi.html"><a href="12-seleksi-kondisi.html">A.12. Seleksi Kondisi</a></li><li class="chapter"data-level="1.2.13"data-path="13-perulangan.html"><a href="13-perulangan.html">A.13. Perulangan</a></li><li class="chapter"data-level="1.2.14"data-path="14-array.html"><a href="14-array.html">A.14. Array</a></li><li class="chapter"data-level="1.2.15"data-path="15-slice.html"><a href="15-slice.html">A.15. Slice</a></li><li class="chapter"data-level="1.2.16"data-path="16-map.html"><a href="16-map.html">A.16. Map</a></li><li class="chapter"data-level="1.2.17"data-path="17-fungsi.html"><a href="17-fungsi.html">A.17. Fungsi</a></li><li class="chapter"data-level="1.2.18"data-path="18-fungsi-multiple-return.html"><a href="18-fungsi-multiple-return.html">A.18. Fungsi Multiple Return</a></li><li class="chapter"data-level="1.2.19"data-path="19-fungsi-variadic.html"><a href="19-fungsi-variadic.html">A.19. Fungsi Variadic</a></li><li class="chapter"data-level="1.2.20"data-path="20-fungsi-closure.html"><a href="20-fungsi-closure.html">A.20. Fungsi Closure</a></li><li class="chapter"data-level="1.2.21"data-path="21-fungsi-sebagai-parameter.html"><a href="21-fungsi-sebagai-parameter.html">A.21. Fungsi Sebagai parameter</a></li><li class="chapter"data-level="1.2.22"data-path="22-pointer.html"><a href="22-pointer.html">A.22. Pointer</a></li><li class="chapter"data-level="1.2.23"data-path="23-struct.html"><a href="23-struct.html">A.23. Struct</a></li><li class="chapter"data-level="1.2.24"data-path="24-method.html"><a href="24-method.html">A.24. Method</a></li><li class="chapter"data-level="1.2.25"data-path="25-properti-public-dan-private.html"><a href="25-properti-public-dan-private.html">A.25. Property Public & Private</a></li><li class="chapter"data-level="1.2.26"data-path="26-interface.html"><a href="26-interface.html">A.26. Interface</a></li><li class="chapter"data-level="1.2.27"data-path="27-interface-kosong.html"><a href="27-interface-kosong.html">A.27. Interface Kosong</a></li><li class="chapter"data-level="1.2.28"data-path="28-reflect.html"><a href="28-reflect.html">A.28. Reflect</a></li><li class="chapter"data-level="1.2.29"data-path="29-goroutine.html"><a href="29-goroutine.html">A.29. Goroutine</a></li><li class="chapter"data-level="1.2.30"data-path="30-channel.html"><a href="30-channel.html">A.30. Channel</a></li><li class="chapter"data-level="1.2.31"data-path="31-buffered-channel.html"><a href="31-buffered-channel.html">A.31. Buffered Channel</a></li><li class="chapter"data-level="1.2.32"data-path="32-channel-select.html"><a href="32-channel-select.html">A.32. Channel - Select</a></li><li class="chapter"data-level="1.2.33"data-path="33-channel-range-close.html"><a href="33-channel-range-close.html">A.33. Channel - Range & Close</a></li><li class="chapter"data-level="1.2.34"data-path="34-channel-timeout.html"><a href="34-channel-timeout.html">A.34. Channel - Timeout</a></li><li class="chapter"data-level="1.2.35"data-path="35-defer-exit.html"><a href="35-defer-exit.html">A.35. Defer & Exit</a></li><li class="chapter"data-level="1.2.36"data-path="36-error-panic-recover.html"><a href="36-error-panic-recover.html">A.36. Error, Panic, & Recover</a></li><li class="chapter"data-level="1.2.37"data-path="37-string-format.html"><a href="37-string-format.html">A.37. Layout Format String</a></li><li class="chapter"data-level="1.2.38"data-path="38-time.html"><a href="38-time.html">A.38. Time, Parsing Time, & Format Time</a></li><li class="chapter"data-level="1.2.39"data-path="39-timer.html"><a href="39-timer.html">A.39. Timer, Ticker, & Scheduler</a></li><li class="chapter"data-level="1.2.40"data-path="40-data-type-conversion.html"><a href="40-data-type-conversion.html">A.40. Konversi Antar Tipe Data</a></li><li class="chapter"data-level="1.2.41"data-path="41-strings.html"><a href="41-strings.html">A.41. Fungsi String</a></li><li class="chapter"data-level="1.2.42"data-path="42-regex.html"><a href="42-regex.html">A.42. Regex</a></li><li class="chapter"data-level="1.2.43"data-path="43-encoding-base64.html"><a href="43-encoding-base64.html">A.43. Encode - Decode Base64</a></li><li class="chapter"data-level="1.2.44"data-path="44-hash-sha1.html"><a href="44-hash-sha1.html">A.44. Hash Sha1</a></li><li class="chapter"data-level="1.2.45"data-path="45-command-line-args-flag.html"><a href="45-command-line-args-flag.html">A.45. Arguments & Flag</a></li><li class="chapter"data-level="1.2.46"data-path="46-exec.html"><a href="46-exec.html">A.46. Exec</a></li><li class="chapter"data-level="1.2.47"data-path="47-file.html"><a href="47-file.html">A.47. File</a></li><li class="chapter"data-level="1.2.48"data-path="48-web.html"><a href="48-web.html">A.48. Web</a></li><li class="chapter"data-level="1.2.49"data-path="49-url-parsing.html"><a href="49-url-parsing.html">A.49. URL Parsing</a></li><li class="chapter"data-level="1.2.50"data-path="50-json.html"><a href="50-json.html">A.50. JSON</a></li><li class="chapter"data-level="1.2.51"data-path="51-web-json-api.html"><a href="51-web-json-api.html">A.51. Web Service API (JSON Data)</a></li><li class="chapter"data-level="1.2.52"data-path="52-http-request.html"><a href="52-http-request.html">A.52. HTTP Request</a></li><li class="chapter"data-level="1.2.53"data-path="53-sql.html"><a href="53-sql.html">A.53. SQL</a></li><li class="chapter"data-level="1.2.54"data-path="54-mongodb.html"><a href="54-mongodb.html">A.54. NoSQL MongoDB</a></li><li class="chapter"data-level="1.2.55"data-path="55-unit-test.html"><a href="55-unit-test.html">A.55. Unit Test</a></li><li class="chapter"data-level="1.2.56"data-path="56-waitgroup.html"><a href="56-waitgroup.html">A.56. WaitGroup</a></li><li class="chapter"data-level="1.2.57"data-path="57-mutex.html"><a href="57-mutex.html">A.57. Mutex</a></li><li class="chapter"data-level="1.2.58"data-path="A-58-go-vendoring.html"><a href="A-58-go-vendoring.html">A.58. Go Vendoring</a></li><li class="chapter"data-level="1.2.59"data-path="A-59-go-dep.html"><a href="A-59-go-dep.html">A.59. Dep - Go Dependency Management Tool</a></li><li class="chapter"data-level="1.2.60"data-path="A-60-go-modules.html"><a href="A-60-go-modules.html">A.60. Go Modules</a></li></ul></li><li class="chapter"data-level="1.3"><span>B. Pemrograman Web Go Dasar</span><ul class="articles"><li class="chapter"data-level="1.3.1"data-path="B-1-golang-web-hello-world.html"><a href="B-1-golang-web-hello-world.html">B.1. Golang Web App: Hello World</a></li><li class="chapter"data-level="1.3.2"data-path="B-2-routing-http-handlefunc.html"><a href="B-2-routing-http-handlefunc.html">B.2. Routing http.HandleFunc</a></li><li class="chapter"data-level="1.3.3"data-path="B-3-routing-static-assets.html"><a href="B-3-routing-static-assets.html">B.3. Routing Static Assets</a></li><li class="chapter"data-level="1.3.4"data-path="B-4-template-render-html.html"><a href="B-4-template-render-html.html">B.4. Template: Render HTML Template</a></li><li class="chapter"data-level="1.3.5"data-path="B-5-template-render-partial-html.html"><a href="B-5-template-render-partial-html.html">B.5. Template: Render Partial HTML Template</a></li><li class="chapter"data-level="1.3.6"data-path="B-6-template-actions-variables.html"><a href="B-6-template-actions-variables.html">B.6. Template: Actions & Variables</a></li><li class="chapter"data-level="1.3.7"data-path="B-7-template-functions.html"><a href="B-7-template-functions.html">B.7. Template: Functions</a></li><li class="chapter"data-level="1.3.8"data-path="B-8-template-custom-functions.html"><a href="B-8-template-custom-functions.html">B.8. Template: Custom Functions</a></li><li class="chapter"data-level="1.3.9"data-path="B-9-render-specific-html-template.html"><a href="B-9-render-specific-html-template.html">B.9. Template: Render Specific HTML Template</a></li><li class="chapter"data-level="1.3.10"data-path="B-10-render-html-string.html"><a href="B-10-render-html-string.html">B.10. Template: Render HTML String</a></li><li class="chapter"data-level="1.3.11"data-path="B-11-http-method.html"><a href="B-11-http-method.html">B.11. HTTP Method: POST & GET</a></li><li class="chapter"data-level="1.3.12"data-path="B-12-form-value.html"><a href="B-12-form-value.html">B.12. Form Value</a></li><li class="chapter"data-level="1.3.13"data-path="B-13-form-upload-file.html"><a href="B-13-form-upload-file.html">B.13. Form Upload File</a></li><li class="chapter"data-level="1.3.14"data-path="B-14-ajax-json-payload.html"><a href="B-14-ajax-json-payload.html">B.14. AJAX JSON Payload</a></li><li class="chapter"data-level="1.3.15"data-path="B-15-ajax-json-response.html"><a href="B-15-ajax-json-response.html">B.15. AJAX JSON Response</a></li><li class="chapter"data-level="1.3.16"data-path="B-16-ajax-multi-upload.html"><a href="B-16-ajax-multi-upload.html">B.16. AJAX Multiple File Upload</a></li><li class="chapter"data-level="1.3.17"data-path="B-17-download-file.html"><a href="B-17-download-file.html">B.17. Download File</a></li><li class="chapter"data-level="1.3.18"data-path="B-18-http-basic-auth.html"><a href="B-18-http-basic-auth.html">B.18. HTTP Basic Auth</a></li><li class="chapter"data-level="1.3.19"data-path="B-19-middleware-using-http-handler.html"><a href="B-19-middleware-using-http-handler.html">B.19. Middleware http.Handler</a></li><li class="chapter"data-level="1.3.20"data-path="B-20-custom-mux-multiplexer.html"><a href="B-20-custom-mux-multiplexer.html">B.20. Custom Multiplexer</a></li><li class="chapter"data-level="1.3.21"data-path="B-21-cookie.html"><a href="B-21-cookie.html">B.21. HTTP Cookie</a></li><li class="chapter"data-level="1.3.22"data-path="B-22-configuration-file.html"><a href="B-22-configuration-file.html">B.22. Configuration File</a></li><li class="chapter"data-level="1.3.23"data-path="B-23-server-handle-cancelled-http-request.html"><a href="B-23-server-handle-cancelled-http-request.html">B.23. Server Handler untuk Cancelled Client HTTP Request</a></li></ul></li><li class="chapter"data-level="1.4"><span>C. Pemrograman Go Lanjut</span><ul class="articles"><li class="chapter"data-level="1.4.1"data-path="C-1-echo-routing.html"><a href="C-1-echo-routing.html">C.1. Echo Framework & Routing</a></li><li class="chapter"data-level="1.4.2"data-path="C-2-parsing-http-request-payload-echo.html"><a href="C-2-parsing-http-request-payload-echo.html">C.2. Parsing HTTP Request Payload (Echo)</a></li><li class="chapter"data-level="1.4.3"data-path="C-3-http-request-payload-validation.html"><a href="C-3-http-request-payload-validation.html">C.3. HTTP Request Payload Validation (Validator v9, Echo)</a></li><li class="chapter"data-level="1.4.4"data-path="C-4-http-error-handling.html"><a href="C-4-http-error-handling.html">C.4. HTTP Error Handling (Validator v9, Echo)</a></li><li class="chapter"data-level="1.4.5"data-path="C-5-echo-template-rendering.html"><a href="C-5-echo-template-rendering.html">C.5. Template Rendering in Echo</a></li><li class="chapter"data-level="1.4.6"data-path="C-6-advanced-middleware-and-logging.html"><a href="C-6-advanced-middleware-and-logging.html">C.6. Advanced Middleware & Logging (Logrus, Echo Logger)</a></li><li class="chapter"data-level="1.4.7"data-path="C-7-flag-parser.html"><a href="C-7-flag-parser.html">C.7. CLI Flag Parser (Kingpin)</a></li><li class="chapter"data-level="1.4.8"data-path="C-8-advanced-configuration-file.html"><a href="C-8-advanced-configuration-file.html">C.8. Advanced Configuration File (Viper)</a></li><li class="chapter"data-level="1.4.9"data-path="C-9-securecookie.html"><a href="C-9-securecookie.html">C.9. Secure Cookie (Gorilla Securecookie)</a></li><li class="chapter"data-level="1.4.10"data-path="C-10-session.html"><a href="C-10-session.html">C.10. Session (Gorilla Session)</a></li><li class="chapter"data-level="1.4.11"data-path="C-12-cors-preflight-request.html"><a href="C-12-cors-preflight-request.html">C.12. CORS & Preflight Request</a></li><li class="chapter"data-level="1.4.12"data-path="C-13-csrf.html"><a href="C-13-csrf.html">C.13. CSRF</a></li><li class="chapter"data-level="1.4.13"data-path="C-14-secure-middleware.html"><a href="C-14-secure-middleware.html">C.14. Secure Middleware</a></li><li class="chapter"data-level="1.4.14"data-path="C-15-http-gzip-compression.html"><a href="C-15-http-gzip-compression.html">C.15. HTTP Gzip Compression (gziphandler)</a></li><li class="chapter"data-level="1.4.15"data-path="C-16-send-email.html"><a href="C-16-send-email.html">C.16. Send Mail (net/smtp, Gomail v2)</a></li><li class="chapter"data-level="1.4.16"data-path="C-17-read-write-excel-xlsx-file.html"><a href="C-17-read-write-excel-xlsx-file.html">C.17. Read & Write Excel XLSX File (Excelize)</a></li><li class="chapter"data-level="1.4.17"data-path="C-18-write-pdf-file.html"><a href="C-18-write-pdf-file.html">C.18. Write PDF File (gofpdf)</a></li><li class="chapter"data-level="1.4.18"data-path="C-19-convert-html-to-pdf.html"><a href="C-19-convert-html-to-pdf.html">C.19. Convert HTML to PDF (go-wkhtmltopdf)</a></li><li class="chapter"data-level="1.4.19"data-path="C-20-scraping-parsing-html.html"><a href="C-20-scraping-parsing-html.html">C.20. Scraping & Parsing HTML (goquery)</a></li><li class="chapter"data-level="1.4.20"data-path="C-21-xml-parser.html"><a href="C-21-xml-parser.html">C.21. Parse & Generate XML (etree)</a></li><li class="chapter"data-level="1.4.21"data-path="C-22-https-tls.html"><a href="C-22-https-tls.html">C.22. HTTPS/TLS Web Server</a></li><li class="chapter"data-level="1.4.22"data-path="C-23-http2-server-push.html"><a href="C-23-http2-server-push.html">C.23. HTTP/2 & HTTP/2 Server Push</a></li><li class="chapter"data-level="1.4.23"data-path="C-24-client-http-request.html"><a href="C-24-client-http-request.html">C.24. Client HTTP Request</a></li><li class="chapter"data-level="1.4.24"data-path="C-25-secure-insecure-client-http-request.html"><a href="C-25-secure-insecure-client-http-request.html">C.25. Secure & Insecure Client HTTP Request</a></li><li class="chapter"data-level="1.4.25"data-path="C-26-golang-ftp.html"><a href="C-26-golang-ftp.html">C.26. FTP</a></li><li class="chapter"data-level="1.4.26"data-path="C-27-golang-ssh-sftp.html"><a href="C-27-golang-ssh-sftp.html">C.27. SSH & SFTP</a></li><li class="chapter"data-level="1.4.27"data-path="C-28-golang-web-socket.html"><a href="C-28-golang-web-socket.html">C.28. Web Socket: Chatting App</a></li><li class="chapter"data-level="1.4.28"data-path="C-29-golang-protobuf-implementation.html"><a href="C-29-golang-protobuf-implementation.html">C.29. Protobuf</a></li><li class="chapter"data-level="1.4.29"data-path="C-30-golang-grpc-protobuf.html"><a href="C-30-golang-grpc-protobuf.html">C.30. gRPC + Protobuf</a></li><li class="chapter"data-level="1.4.30"data-path="C-31-golang-context.html"><a href="C-31-golang-context.html">C.31. Context: Value, Timeout, & Cancellation</a></li><li class="chapter"data-level="1.4.31"data-path="C-32-golang-jwt.html"><a href="C-32-golang-jwt.html">C.32. JSON Web Token (JWT)</a></li><li class="chapter active"data-level="1.4.32"data-path="C-33-golang-ldap-authentication.html"><a href="C-33-golang-ldap-authentication.html">C.33. LDAP Authentication</a></li></ul></li><li><a href="https://www.gitbook.com"target="blank"class="gitbook-link">Published with GitBook</a></li></ul></nav></div><div class="book-body"><div class="body-inner"><div class="book-header"role="navigation"><h1><a href=".">C.33. LDAP Authentication</a></h1></div><div class="page-wrapper"role="main"tabindex="-1"><div class="page-inner"><div id="book-search-results"><div class="search-noresults"><section class="markdown-section normal"><h1 id="c33-ldap-authentication">C.33. LDAP Authentication</h1><p>Pada bab ini kita akan belajar cara melakukan otentikasi menggunakan protokol LDAP ke Directory Service. Pembelajaran akan kita awali dengan membahas sedikit mengenai definisi dari LDAP dan beberapa istilah relevan lainnya.</p><h2 id="c331-definisi">C.33.1. Definisi</h2><h4 id="ldap">LDAP</h4><p>LDAP (Lightweight Directory Access Protocol) adalah protokol yang digunakan untuk mengakses <strong>Directory Services</strong> dalam sebuah komunikasi client-server.</p><h4 id="directory-services">Directory Services</h4><p>Directory Services adalah sebuah sistem yang menyimpan, mengelola, dan menyediakan akses informasi untuk menghubungkan sumber daya network (atau network resources). Network resources yang dimaksud contohnya:</p><ul><li>Email</li><li>Perangkat periferal</li><li>Komputer</li><li>Folder/Files</li><li>Printers</li><li>Nomor telephone</li><li>...</li></ul><p>Cakupan network resources mulai dari hardware seperti komputer (atau lebih tinggi lagi) hingga aspek yang relatif kecil seperti file.</p><p>Dengan terhubungnya resources tersebut, akan mudah bagi kita untuk mengelola banyak hal yang berhubungan dengan network. Seperti misal membuat aplikasi yang bisa login menggunakan credentials email kantor, atau banyak lainnya.</p><p>Selain itu, juga LDAP sering dimanfaatkan dalam implementasi SSO (Single sign-on).</p><h4 id="bind-operation">Bind Operation</h4><p>Operasi bind digunakan untuk otentikasi client ke directory server, dan juga untuk mengubah state otorisasi client tersebut. Operasi bind dilakukan dengan mengirim informasi bind dn dan password.</p><h4 id="directory-server-untuk-testing">Directory Server untuk testing</h4><p>Karena komunikasi adalah client-server maka kita perlu menggunakan salah satu directory server untuk keperluan testing. Beruntung-nya <a href="www.forumsys.com">Forum Systems</a> berbaik hati menyediakan directory server yg bisa diakses secara gratis, dan di bab ini akan kita gunakan.</p><p>Berikut adalah informasi credentials directory server tersebut:</p><pre><code>Server: ldap.forumsys.com  
Port: 389
Bind DN: cn=read-only-admin,dc=example,dc=com
Bind Password: password
</code></pre><p>Terdapat beberapa user data di sana, kesemuanya memiliki password yang sama, yaitu: <code>password</code>.</p><p>Lebih detailnya silakan cek di <a href="http://www.forumsys.com/tutorials/integration-how-to/ldap/online-ldap-test-server/"target="_blank">http://www.forumsys.com/tutorials/integration-how-to/ldap/online-ldap-test-server/</a></p><h2 id="c332-ldap-browser--directory-client">C.33.2. LDAP Browser &amp; Directory Client</h2><p>Silakan gunakan LDAP browser yang disukai, atau bisa gunakan <a href="https://directory.apache.org/studio/"target="_blank">Apache Directory Studio</a>.</p><p>Buat koneksi baru menggunakan credentials di atas. Lakukan hingga berhasil memunculkan list user data seperti gambar berikut.</p><p><img alt="Browse LDAP"src="images/C.33_1_ldap_browse.png"></p><p>Bisa dilihat bahwa terdapat beberapa user data. Nantinya testing akan dilkakukan dengan login menggunakan salah satu user tersebut.</p><p>Berikutnya masuk ke bagian perkodingan.</p><h2 id="c333-login-web-app">C.33.3. Login Web App</h2><p>Pertama kita buat terlebih dahulu aplikasi web-nya. Ada dua rute yang perlu dipersiapkan:</p><ul><li>Landing page, memunculkan form login</li><li>Action login endpoint, untuk handle proses login</li></ul><p>Mari langsung praktek, buat file <code>main.go</code>, lalu siapkan html string untuk login form.</p><pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;net/http&quot;</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;fmt&quot;</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;html/template&quot;</span>

<span class="hljs-comment">// the port where web server will run</span>
<span class="hljs-keyword">const</span> webServerPort = <span class="hljs-number">9000</span>

<span class="hljs-comment">// the login form html</span>
<span class="hljs-keyword">const</span> view = <span class="hljs-string">`&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;Template&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;form method=&quot;post&quot; action=&quot;/login&quot;&gt;
            &lt;div&gt;
                &lt;label&gt;username&lt;/label&gt;
                &lt;input type=&quot;text&quot; name=&quot;username&quot; required/&gt;
            &lt;/div&gt;
            &lt;div&gt;
                &lt;label&gt;password&lt;/label&gt;
                &lt;input type=&quot;password&quot; name=&quot;password&quot; required/&gt;
            &lt;/div&gt;
            &lt;button type=&quot;submit&quot;&gt;Login&lt;/button&gt;
        &lt;/form&gt;
    &lt;/body&gt;
&lt;/html&gt;`</span>
</code></pre><p>Lalu buat fungsi <code>main()</code>, siapkan route handler landing page, parse html string di atas.</p><pre><code class="lang-go">http.HandleFunc(<span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-keyword">func</span>(w http.ResponseWriter, r *http.Request) {
    <span class="hljs-keyword">var</span> tmpl = template.Must(template.New(<span class="hljs-string">&quot;main-template&quot;</span>).Parse(view))
    <span class="hljs-keyword">if</span> err := tmpl.Execute(w, <span class="hljs-literal">nil</span>); err != <span class="hljs-literal">nil</span> {
        http.Error(w, err.Error(), http.StatusInternalServerError)
    }
})
</code></pre><p>Kemudian siapkan route handler untuk action login.</p><pre><code class="lang-go">http.HandleFunc(<span class="hljs-string">&quot;/login&quot;</span>, <span class="hljs-keyword">func</span>(w http.ResponseWriter, r *http.Request) {
    r.ParseForm()

    username := r.PostFormValue(<span class="hljs-string">&quot;username&quot;</span>)
    password := r.PostFormValue(<span class="hljs-string">&quot;password&quot;</span>)

    <span class="hljs-comment">// authenticate via ldap</span>
    ok, data, err := AuthUsingLDAP(username, password)
    <span class="hljs-keyword">if</span> !ok {
        http.Error(w, <span class="hljs-string">&quot;invalid username/password&quot;</span>, http.StatusUnauthorized)
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        http.Error(w, err.Error(), http.StatusUnauthorized)
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-comment">// greet user on success</span>
    message := fmt.Sprintf(<span class="hljs-string">&quot;welcome %s&quot;</span>, data.FullName)
    w.Write([]<span class="hljs-keyword">byte</span>(message))
})
</code></pre><p>Pada kode di atas proses otentikasi di handle secara implisit oleh fungsi <code>AuthUsingLDAP()</code>, yang akan kita buat pastinya. Ketika user sukses melakukan login maka pesan selamat datang akan ditampilkan dengan menyertakan data nama lengkap user tersebut (data nama didapat nantinya dari user data di directory service).</p><p>OK, dua handler sudah siap, sekarang start webserver.</p><pre><code class="lang-go">portString := fmt.Sprintf(<span class="hljs-string">&quot;:%d&quot;</span>, webServerPort)
fmt.Println(<span class="hljs-string">&quot;server started at&quot;</span>, portString)
http.ListenAndServe(portString, <span class="hljs-literal">nil</span>)
</code></pre><h2 id="c334-handling-the-ldap-authentication">C.33.4. Handling the LDAP Authentication</h2><p>Masuk ke bagian kode untuk LDAP, buat file baru di folder yang sama, <code>ldap.go</code>. Import library ldap dan siapkan beberapa konstanta.</p><pre><code class="lang-go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">&quot;fmt&quot;</span>
    <span class="hljs-string">&quot;github.com/go-ldap/ldap&quot;</span>
)

<span class="hljs-keyword">const</span> (
    ldapServer   = <span class="hljs-string">&quot;ldap.forumsys.com&quot;</span>
    ldapPort     = <span class="hljs-number">389</span>
    ldapBindDN   = <span class="hljs-string">&quot;cn=read-only-admin,dc=example,dc=com&quot;</span>
    ldapPassword = <span class="hljs-string">&quot;password&quot;</span>
    ldapSearchDN = <span class="hljs-string">&quot;dc=example,dc=com&quot;</span>
)
</code></pre><p>3rd party lib <a href="github.com/go-ldap/ldap">https://github.com/go-ldap/ldap</a> kita gunakan untuk melakukan operasi client-server dengan directory server. Silakan <code>go get</code> terlebih dahulu jika belum.</p><p>Beberapa konstanta di atas isinya sesuai dengan credentials directory server test yang di atas sudah kita bahas. Diluar itu ada satu tambahan konstanta, yaitu <code>ldapSearchDN</code>, nantinya kita perlukan dalam melakukan operasi search.</p><p>Selanjutnya, siapkan struct untuk menampung user data yang dikembalikan oleh directory server.</p><pre><code class="lang-go"><span class="hljs-keyword">type</span> UserLDAPData <span class="hljs-keyword">struct</span> {
    ID       <span class="hljs-keyword">string</span>
    Email    <span class="hljs-keyword">string</span>
    Name     <span class="hljs-keyword">string</span>
    FullName <span class="hljs-keyword">string</span>
}
</code></pre><p>Buat fungsi <code>AuthUsingLDAP()</code>, lalu inisialisasi koneksi ldap. Fungsi ini menerima dua parameter, username dan password, yang keduanya diinputkan oleh user nantinya lewat browser.</p><pre><code class="lang-go"><span class="hljs-keyword">func</span> AuthUsingLDAP(username, password <span class="hljs-keyword">string</span>) (<span class="hljs-keyword">bool</span>, *UserLDAPData, error) {
    l, err := ldap.Dial(<span class="hljs-string">&quot;tcp&quot;</span>, fmt.Sprintf(<span class="hljs-string">&quot;%s:%d&quot;</span>, ldapServer, ldapPort))
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, <span class="hljs-literal">nil</span>, err
    }
    <span class="hljs-keyword">defer</span> l.Close()

    <span class="hljs-comment">// ...</span>
}
</code></pre><p>Fungsi <code>ldap.Dial()</code> digunakan untuk melakukan handshake dengan directory server.</p><p>Setelah itu lakukan bind operation menggunakan Bind DN dan password sesuai konstanta yang sudah dipersiapkan. Gunakan method <code>.Bind()</code> milik objek hasil dial ldap untuk bind.</p><pre><code class="lang-go">err = l.Bind(ldapBindDN, ldapPassword)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, <span class="hljs-literal">nil</span>, err
}
</code></pre><p>Setelah bind sukses, lakukan operasi search. Siapkan terlebih dahulu objek search request. Klausa search yang digunakan adalah <code>uid</code> atau username dengan base dn adalah <code>ldapSearchDN</code>.</p><pre><code class="lang-go">searchRequest := ldap.NewSearchRequest(
    ldapSearchDN,
    ldap.ScopeWholeSubtree,
    ldap.NeverDerefAliases,
    <span class="hljs-number">0</span>,
    <span class="hljs-number">0</span>,
    <span class="hljs-literal">false</span>,
    fmt.Sprintf(<span class="hljs-string">&quot;(&amp;(objectClass=organizationalPerson)(uid=%s))&quot;</span>, username),
    []<span class="hljs-keyword">string</span>{<span class="hljs-string">&quot;dn&quot;</span>, <span class="hljs-string">&quot;cn&quot;</span>, <span class="hljs-string">&quot;sn&quot;</span>, <span class="hljs-string">&quot;mail&quot;</span>},
    <span class="hljs-literal">nil</span>,
)
</code></pre><p>Klausa dituliskan dalam bentuk <strong>LDAP Filter Syntax</strong>. Bisa dilihat di atas merupakan contoh filter uid/username. Lebih jelasnya mengenai sintaks ini silakan merujuk ke <a href="http://www.ldapexplorer.com/en/manual/109010000-ldap-filter-syntax.htm"target="_blank">http://www.ldapexplorer.com/en/manual/109010000-ldap-filter-syntax.htm</a></p><p>Parameter setelah filter adalah informasi atributtes yang ingin kita dapat dari hasil search request.</p><p>Berikutnya, trigger object search request tersebut lewat method <code>.Search()</code> dari objek ldap. Cek data yang dikembalikan (accessible via <code>.Entries</code> property), jika tidak ada data maka kita asumsikan search gagal.</p><pre><code class="lang-go">sr, err := l.Search(searchRequest)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, <span class="hljs-literal">nil</span>, err
}

<span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sr.Entries) == <span class="hljs-number">0</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, <span class="hljs-literal">nil</span>, fmt.Errorf(<span class="hljs-string">&quot;User not found&quot;</span>)
}
entry := sr.Entries[<span class="hljs-number">0</span>]
</code></pre><p>Jika semuanya berjalan lancar, maka kita akan dapat setidaknya 1 user data. Lakukan bind operation menggunakan DN milik user tersebut dengan password adalah yang diinputkan user. Ini diperlukan untuk mem-validasi apakah password yang di-inputkan user sudah benar atau tidak.</p><pre><code class="lang-go">err = l.Bind(entry.DN, password)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, <span class="hljs-literal">nil</span>, err
}
</code></pre><p>Jika semua masih berjalan lancar, berarti proses otentikasi bisa dipastikan berhasil. Tapi ada satu hal lagi yang perlu dilakukan, yaitu serialisasi data attributes kembalian dari server untuk fit ke object <code>UserLDAPData</code> yang sudah disiapkan.</p><pre><code class="lang-go">data := <span class="hljs-built_in">new</span>(UserLDAPData)
data.ID = username

<span class="hljs-keyword">for</span> _, attr := <span class="hljs-keyword">range</span> entry.Attributes {
    <span class="hljs-keyword">switch</span> attr.Name {
    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;sn&quot;</span>:
        data.Name = attr.Values[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;mail&quot;</span>:
        data.Email = attr.Values[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;cn&quot;</span>:
        data.FullName = attr.Values[<span class="hljs-number">0</span>]
    }
}

<span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>, data, <span class="hljs-literal">nil</span>
</code></pre><h2 id="c335-testing">C.33.5. Testing</h2><p>Ok, mari kita test. Jalankan program, lalu akses <a href="http://localhost:9000/"target="_blank">http://localhost:9000/</a>; Lakukan login menggunakan salah satu user yang ada (silakan cek di LDAP browser anda). Di sini saya pilih menggunakan user <code>boyle</code>, password-nya <code>password</code> (semua user ber-kata-sandi sama).</p><p><img alt="Ldap Login"src="images/C.33_2_ldap_login.png"></p><p>Login berhasil, dibuktikan dengan munculnya fullname <strong>Robert Boyle</strong>. Coba juga gunakan password yang salah agar lebih meyakinkan.</p><p><img alt="Ldap Login Sukses"src="images/C.33_3_ldap_login_success.png"></p><h2 id="c336-ldap-tls">C.33.6. LDAP TLS</h2><p>Untuk koneksi LDAP yang TLS-enabled, maka cukup panggil method <code>.StartTLS()</code> milik objek ldap dial, dan isi parameternya dengan tls config. Pemanggilan fungsi ini harus tepat setelah proses dial ke directory server.</p><pre><code class="lang-go">l, err := ldap.Dial(<span class="hljs-string">&quot;tcp&quot;</span>, fmt.Sprintf(<span class="hljs-string">&quot;%s:%d&quot;</span>, ldapServer, ldapPort))
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, <span class="hljs-literal">nil</span>, err
}
<span class="hljs-keyword">defer</span> l.Close()

<span class="hljs-comment">// reconnect with TLS</span>
err = l.StartTLS(tlsConfig)
<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, <span class="hljs-literal">nil</span>, err
}
</code></pre><hr><ul><li><a href="https://github.com/go-ldap/ldap"target="_blank">go-ldap/ldap</a>, by go-ldap team, MIT License</li></ul></section></div><div class="search-results"><div class="has-results"><h1 class="search-results-title">results matching ""</h1></div><div class="no-results"><h1 class="search-results-title">No results matching ""</h1></div></div></div></div></div></div><a href="C-32-golang-jwt.html"class="navigation navigation-prev navigation-unique"aria-label="Previous page: C.32. JSON Web Token (JWT)"></a></div><script>var gitbook=gitbook||[];gitbook.push(function(){gitbook.page.hasChanged({page:{title:"C.33. LDAP Authentication",level:"1.4.32",depth:2,previous:{title:"C.32. JSON Web Token (JWT)",level:"1.4.31",depth:2,path:"C-32-golang-jwt.md",ref:"C-32-golang-jwt.md",articles:[]},dir:"ltr"},config:{plugins:["ga","html-minifier","disqus","meta","sitemap","scripts"],styles:{website:"styles/website.css"},pluginsConfig:{disqus:{useIdentifier:!1,shortName:"dasarpemrogramangolang"},meta:{content:"",data:[{name:"google-site-verification",content:"UZnxS2Dk3fm2_Elms3a__56Q_oQ3sQ1h0SVXXlHSmbE"},{name:"og:image",content:"https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg"},{name:"twitter:image",content:"https://dasarpemrogramangolang.novalagung.com/images/cover_fb_share.jpg"}],name:""},scripts:{files:[]},search:{},"html-minifier":{customAttrSurround:[],removeScriptTypeAttributes:!1,removeEmptyAttributes:!1,removeRedundantAttributes:!1,removeEmptyElements:!0,sortClassName:!0,caseSensitive:!0,html5:!0,collapseWhitespace:!0,processConditionalComments:!1,quoteCharacter:null,keepClosingSlash:!0,preventAttributesEscaping:!1,minifyURLs:!1,removeAttributeQuotes:!1,decodeEntities:!1,trimCustomFragments:!1,customAttrAssign:[],includeAutoGeneratedTags:!0,collapseInlineTagWhitespace:!1,collapseBooleanAttributes:!0,minifyJS:!0,removeTagWhitespace:!0,preserveLineBreaks:!1,sortAttributes:!0,removeStyleLinkTypeAttributes:!1,removeComments:!0,minifyCSS:!0,processScripts:[],conservativeCollapse:!1,removeOptionalTags:!1,useShortDoctype:!1},lunr:{maxIndexSize:1e6,ignoreSpecialCharacters:!1},fontsettings:{theme:"white",family:"sans",size:2},highlight:{},sitemap:{hostname:"https://dasarpemrogramangolang.novalagung.com/"},ga:{configuration:"auto",token:"UA-27602984-29"},sharing:{facebook:!0,twitter:!0,google:!1,weibo:!1,instapaper:!1,vk:!1,all:["facebook","google","twitter","weibo","instapaper"]},"theme-default":{styles:{website:"styles/website.css",pdf:"styles/pdf.css",epub:"styles/epub.css",mobi:"styles/mobi.css",ebook:"styles/ebook.css",print:"styles/print.css"},showLevel:!1}},theme:"default",lunr:{maxIndexSize:1e9},pdf:{pageNumbers:!0,fontSize:12,fontFamily:"Arial",paperSize:"a4",chapterMark:"pagebreak",pageBreaksBefore:"/",margin:{right:62,left:62,top:56,bottom:56}},structure:{langs:"LANGS.md",readme:"README.md",glossary:"GLOSSARY.md",summary:"SUMMARY.md"},variables:{},gitbook:"*"},file:{path:"C-33-golang-ldap-authentication.md",mtime:"2019-06-19T09:15:21.242Z",type:"markdown"},gitbook:{version:"3.2.3",time:"2019-07-29T08:35:13.592Z"},basePath:".",book:{language:""}})})</script></div><script src="gitbook/gitbook.js"></script><script src="gitbook/theme.js"></script><script src="gitbook/gitbook-plugin-ga/plugin.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/URI.js/1.16.1/URI.min.js"></script><script src="gitbook/gitbook-plugin-disqus/plugin.js"></script><script src="gitbook/gitbook-plugin-search/search-engine.js"></script><script src="gitbook/gitbook-plugin-search/search.js"></script><script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script><script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script><script src="gitbook/gitbook-plugin-sharing/buttons.js"></script><script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script></body></html>